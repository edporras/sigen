<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sigen library: C++ Si Generation Library 2.7.1</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sigen library
   </div>
   <div id="projectbrief">SI Generation Library for MPG/DVB section data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">C++ Si Generation Library 2.7.1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A C++ <a href="https://en.wikipedia.org/wiki/Program-specific_information">MPG PSI</a> and <a href="https://en.wikipedia.org/wiki/Digital_Video_Broadcasting">DVB SI</a> table generation library based on the ETSI EN 300 468 and ISO/IEC 13818-1 standards. The library has support most tables: CAT, PAT, PMT, NIT, SDT, BAT, TDT, TOT, RST, and ST plus many MPG and DVB descriptors.</p>
<p>I wrote the initial version of this library ca. 1999-2000 and updated it around 2003 with a few minor tweaks done since then. It was used in production but nobody had since been maintaining it so I was given permission to open the source so I could make changes to it if needed.</p>
<p>A Doxygen-generated reference <a href="http://edporras.github.io/sigen/docs/">is available</a>.</p>
<p>This is very legacy so now it's mainly a C++ feature playground. Also, some of the logic could definitely be re-thought as it was done based on customer requirements.</p>
<h1>Building </h1>
<div class="fragment"><div class="line">autoreconf -i</div><div class="line">./configure</div><div class="line">make</div></div><!-- fragment --><h1>Sample Usage </h1>
<p>See tests/*.cc for more thorough examples of building various tables. Here's a snippet:</p>
<div class="fragment"><div class="line">{c++}</div><div class="line"></div><div class="line">   // some dummy data</div><div class="line">   const ui16 network_pid = 0x20;</div><div class="line">   const ui16 xport_stream_id = 0x10;</div><div class="line">   const int num_services = 10;</div><div class="line"></div><div class="line">   // the binary table data will be written to a TStream</div><div class="line">   TStream t;</div><div class="line"></div><div class="line">   // Create an MPG Program Association Table</div><div class="line">   PAT pat( xport_stream_id, 0x01 );</div><div class="line"></div><div class="line">   // override the default maximum section length.. (optional)</div><div class="line">   pat.setMaxSectionLen( 900 );</div><div class="line"></div><div class="line">   // add the services (programs).. first, set the network pid (required for</div><div class="line">   // some systems)</div><div class="line">   pat.addNetworkPid( network_pid );</div><div class="line"></div><div class="line">   for (int i = 0; i &lt; num_services; i++)</div><div class="line">   {</div><div class="line">       // each service has an id and pmt pid associated with it..</div><div class="line">       ui16 service_id = 100 + i;</div><div class="line">       ui16 pmt_pid = 200 + i;</div><div class="line"></div><div class="line">       pat.addProgram( service_id, pmt_pid );</div><div class="line">   }</div><div class="line"></div><div class="line">   // for debug output</div><div class="line">   DUMP(pat);</div><div class="line"></div><div class="line">   // this builds the binary section data onto the TStream object</div><div class="line">   pat.buildSections(t);</div><div class="line"></div><div class="line">   //</div><div class="line">   // create a DVB Time and Date Table with the current time</div><div class="line">   TDT tdt;</div><div class="line">   DUMP(tdt);     // debug output to stderr to see table data</div><div class="line"></div><div class="line">   // write table data onto the TStream</div><div class="line">   tdt.buildSections(t);</div><div class="line"></div><div class="line">   //</div><div class="line">   // we now have a TStream that holds a list&lt;Section *&gt;..</div><div class="line"></div><div class="line">   DUMP(t);       // debug - dump the contents of the TStream binary data</div><div class="line"></div><div class="line">   // you can write it to disk, packetize it, etc</div><div class="line">   t.write(&quot;tables.ts&quot;);</div></div><!-- fragment --><p>Program output:</p>
<div class="fragment"><div class="line">- - PAT Dump - -</div><div class="line">Table id            : 0</div><div class="line">Section syn. ind.   : 0x1</div><div class="line">rsvrd. future use   : 0</div><div class="line">reserved            : 0x3</div><div class="line">Table length        : 49 (0x31)</div><div class="line">Xport stream id     : 16 (0x10)</div><div class="line">reserved            : 0x3</div><div class="line">Version number      : 0x1</div><div class="line">Current next ind.   : 0x1</div><div class="line"></div><div class="line"> Program number      : 0 (0)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 32 (0x20)</div><div class="line"></div><div class="line"> Program number      : 100 (0x64)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 200 (0xc8)</div><div class="line"></div><div class="line"> Program number      : 101 (0x65)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 201 (0xc9)</div><div class="line"></div><div class="line"> Program number      : 102 (0x66)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 202 (0xca)</div><div class="line"></div><div class="line"> Program number      : 103 (0x67)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 203 (0xcb)</div><div class="line"></div><div class="line"> Program number      : 104 (0x68)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 204 (0xcc)</div><div class="line"></div><div class="line"> Program number      : 105 (0x69)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 205 (0xcd)</div><div class="line"></div><div class="line"> Program number      : 106 (0x6a)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 206 (0xce)</div><div class="line"></div><div class="line"> Program number      : 107 (0x6b)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 207 (0xcf)</div><div class="line"></div><div class="line"> Program number      : 108 (0x6c)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 208 (0xd0)</div><div class="line"></div><div class="line"> Program number      : 109 (0x6d)</div><div class="line"> reserved            : 0x7</div><div class="line"> Pid                 : 209 (0xd1)</div><div class="line"></div><div class="line"></div><div class="line">- - TDT Dump - -</div><div class="line">Table id            : 0x70</div><div class="line">Section syn. ind.   : 0</div><div class="line">rsvrd. future use   : 0x1</div><div class="line">reserved            : 0x3</div><div class="line">Table length        : 5 (0x5)</div><div class="line">UTC                 : 0xdf69 (6/20/2015), 19:00:17</div><div class="line"></div><div class="line">-- Section dump - num_sections: 2 --</div><div class="line"></div><div class="line">- sec: 0, length: 56, size (max): 900, data:</div><div class="line">[0000] 00 b0 35 00 10 c3 00 00 00 00 e0 20 00 64 e0 c8   ..5........ .d..</div><div class="line">[0016] 00 65 e0 c9 00 66 e0 ca 00 67 e0 cb 00 68 e0 cc   .e...f...g...h..</div><div class="line">[0032] 00 69 e0 cd 00 6a e0 ce 00 6b e0 cf 00 6c e0 d0   .i...j...k...l..</div><div class="line">[0048] 00 6d e0 d1 4f 73 46 ef                           .m..OsF.</div><div class="line"></div><div class="line">- sec: 1, length: 8, size (max): 8, data:</div><div class="line">[0000] 70 70 05 df 69 19 00 17                           pp..i...</div></div><!-- fragment --><h1>Known Problems </h1>
<p>There are a few descriptors that needed to be implemented - see [TODO](TODO). They were not required by the customer so they never made it in. Regardless, this library was used on at least two production systems (N.A. and Spain) and to generate tables for various testing environments. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
